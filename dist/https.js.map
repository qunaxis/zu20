{"version":3,"sources":["../src/https.js"],"names":["HTTP_PORT","HTTPS_PORT","httpsOptions","key","readFileSync","join","__dirname","cert","httpsServer","createServer","httpServer","req","res","writeHead","headers","url","end","listen","console","log"],"mappings":";;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAFqB;AAFI;AAMzB,MAAMA,YAAY,EAAlB,C,CAL2B;AAF3B;;AAQA,MAAMC,aAAa,GAAnB;;AAEA,MAAMC,eAAe;AACjBC,SAAK,aAAGC,YAAH,CAAgB,eAAKC,IAAL,CAAUC,SAAV,EAAqB,kBAArB,CAAhB,CADY,EAC+C;AAChEC,UAAM,aAAGH,YAAH,CAAgB,eAAKC,IAAL,CAAUC,SAAV,EAAqB,kBAArB,CAAhB,CAFW,CAE+C;;AAEpE;AAJqB,CAArB,CAKA,MAAME,cAAc,gBAAMC,YAAN,CAAmBP,YAAnB,gBAApB;;AAEA;AACA,MAAMQ,aAAa,eAAKD,YAAL,CAAkB,CAACE,GAAD,EAAMC,GAAN,KAAc;AAC/CA,QAAIC,SAAJ,CAAc,GAAd,EAAmB,EAAE,YAAY,aAAaF,IAAIG,OAAJ,CAAY,MAAZ,CAAb,GAAmCH,IAAII,GAArD,EAAnB;AACAH,QAAII,GAAJ;AACH,CAHkB,CAAnB;;AAKAN,WAAWO,MAAX,CAAkBjB,SAAlB,EAA6B,MAAMkB,QAAQC,GAAR,CAAa,0BAAyBnB,SAAU,EAAhD,CAAnC;AACAQ,YAAYS,MAAZ,CAAmBhB,UAAnB,EAA+B,MAAMiB,QAAQC,GAAR,CAAa,2BAA0BlB,UAAW,EAAlD,CAArC","file":"https.js","sourcesContent":["// import express from 'express'  // сам фреймворк\r\nimport http from 'http'  // для организации http\r\nimport https from 'https'  // для организации https\r\nimport fs from 'fs'  // для чтения ключевых файловам фреймворк\r\nimport path from 'path'\r\nimport app from './app'\r\n\r\nconst HTTP_PORT = 80\r\nconst HTTPS_PORT = 443\r\n\r\nconst httpsOptions = {\r\n    key: fs.readFileSync(path.join(__dirname, './cfg/server.key')), // путь к ключу\r\n    cert: fs.readFileSync(path.join(__dirname, './cfg/server.crt')) // путь к сертификату\r\n}\r\n// const httpServer = http.createServer(app)\r\nconst httpsServer = https.createServer(httpsOptions, app)\r\n\r\n// Redirect from HTTP to HTTPS\r\nconst httpServer = http.createServer((req, res) => {  \r\n    res.writeHead(301, { \"Location\": \"https://\" + req.headers['host'] + req.url });\r\n    res.end();\r\n})\r\n\r\nhttpServer.listen(HTTP_PORT, () => console.log(`HTTP listening on port ${HTTP_PORT}`))\r\nhttpsServer.listen(HTTPS_PORT, () => console.log(`HTTPS listening on port ${HTTPS_PORT}`))\r\n\r\n"]}